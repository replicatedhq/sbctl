{
  "kind": "PodList",
  "apiVersion": "v1",
  "metadata": {
    "resourceVersion": "27131"
  },
  "items": [
    {
      "kind": "Pod",
      "apiVersion": "v1",
      "metadata": {
        "name": "ekc-operator-7c46b48fd5-967xk",
        "generateName": "ekc-operator-7c46b48fd5-",
        "namespace": "kurl",
        "uid": "dbe6bdd8-df4f-484b-ae2a-02b19c6f0182",
        "resourceVersion": "740",
        "creationTimestamp": "2022-04-11T22:50:59Z",
        "labels": {
          "app": "ekc-operator",
          "pod-template-hash": "7c46b48fd5"
        },
        "ownerReferences": [
          {
            "apiVersion": "apps/v1",
            "kind": "ReplicaSet",
            "name": "ekc-operator-7c46b48fd5",
            "uid": "cdd761d7-56ef-4324-824c-9e4e75abcd73",
            "controller": true,
            "blockOwnerDeletion": true
          }
        ],
        "managedFields": [
          {
            "manager": "kube-controller-manager",
            "operation": "Update",
            "apiVersion": "v1",
            "time": "2022-04-11T22:50:59Z",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:generateName": {},
                "f:labels": {
                  ".": {},
                  "f:app": {},
                  "f:pod-template-hash": {}
                },
                "f:ownerReferences": {
                  ".": {},
                  "k:{\"uid\":\"cdd761d7-56ef-4324-824c-9e4e75abcd73\"}": {}
                }
              },
              "f:spec": {
                "f:containers": {
                  "k:{\"name\":\"ekc-operator\"}": {
                    ".": {},
                    "f:command": {},
                    "f:env": {
                      ".": {},
                      "k:{\"name\":\"LOG_LEVEL\"}": {
                        ".": {},
                        "f:name": {},
                        "f:value": {}
                      }
                    },
                    "f:image": {},
                    "f:imagePullPolicy": {},
                    "f:name": {},
                    "f:resources": {
                      ".": {},
                      "f:limits": {
                        ".": {},
                        "f:cpu": {},
                        "f:memory": {}
                      },
                      "f:requests": {
                        ".": {},
                        "f:cpu": {},
                        "f:memory": {}
                      }
                    },
                    "f:terminationMessagePath": {},
                    "f:terminationMessagePolicy": {},
                    "f:volumeMounts": {
                      ".": {},
                      "k:{\"mountPath\":\"/etc/ekco\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {},
                        "f:readOnly": {}
                      },
                      "k:{\"mountPath\":\"/etc/kubernetes/pki\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {},
                        "f:readOnly": {}
                      }
                    }
                  }
                },
                "f:dnsPolicy": {},
                "f:enableServiceLinks": {},
                "f:nodeSelector": {},
                "f:restartPolicy": {},
                "f:schedulerName": {},
                "f:securityContext": {},
                "f:serviceAccount": {},
                "f:serviceAccountName": {},
                "f:terminationGracePeriodSeconds": {},
                "f:tolerations": {},
                "f:volumes": {
                  ".": {},
                  "k:{\"name\":\"certificates-dir\"}": {
                    ".": {},
                    "f:hostPath": {
                      ".": {},
                      "f:path": {},
                      "f:type": {}
                    },
                    "f:name": {}
                  },
                  "k:{\"name\":\"ekco-config\"}": {
                    ".": {},
                    "f:configMap": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:name": {}
                    },
                    "f:name": {}
                  }
                }
              }
            }
          },
          {
            "manager": "Go-http-client",
            "operation": "Update",
            "apiVersion": "v1",
            "time": "2022-04-11T22:51:01Z",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                "f:conditions": {
                  "k:{\"type\":\"ContainersReady\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  },
                  "k:{\"type\":\"Initialized\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  },
                  "k:{\"type\":\"Ready\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  }
                },
                "f:containerStatuses": {},
                "f:hostIP": {},
                "f:phase": {},
                "f:podIP": {},
                "f:podIPs": {
                  ".": {},
                  "k:{\"ip\":\"***HIDDEN***\"}": {
                    ".": {},
                    "f:ip": {}
                  }
                },
                "f:startTime": {}
              }
            },
            "subresource": "status"
          }
        ]
      },
      "spec": {
        "volumes": [
          {
            "name": "ekco-config",
            "configMap": {
              "name": "ekco-config",
              "defaultMode": 420
            }
          },
          {
            "name": "certificates-dir",
            "hostPath": {
              "path": "/etc/kubernetes/pki",
              "type": "Directory"
            }
          },
          {
            "name": "kube-api-access-hwp56",
            "projected": {
              "sources": [
                {
                  "serviceAccountToken": {
                    "expirationSeconds": 3607,
                    "path": "token"
                  }
                },
                {
                  "configMap": {
                    "name": "kube-root-ca.crt",
                    "items": [
                      {
                        "key": "ca.crt",
                        "path": "ca.crt"
                      }
                    ]
                  }
                },
                {
                  "downwardAPI": {
                    "items": [
                      {
                        "path": "namespace",
                        "fieldRef": {
                          "apiVersion": "v1",
                          "fieldPath": "metadata.namespace"
                        }
                      }
                    ]
                  }
                }
              ],
              "defaultMode": 420
            }
          }
        ],
        "containers": [
          {
            "name": "ekc-operator",
            "image": "replicated/ekco:v0.19.0",
            "command": [
              "/usr/bin/ekco",
              "operator"
            ],
            "env": [
              {
                "name": "LOG_LEVEL",
                "value": "info"
              }
            ],
            "resources": {
              "limits": {
                "cpu": "200m",
                "memory": "128Mi"
              },
              "requests": {
                "cpu": "100m",
                "memory": "64Mi"
              }
            },
            "volumeMounts": [
              {
                "name": "ekco-config",
                "readOnly": true,
                "mountPath": "/etc/ekco"
              },
              {
                "name": "certificates-dir",
                "readOnly": true,
                "mountPath": "/etc/kubernetes/pki"
              },
              {
                "name": "kube-api-access-hwp56",
                "readOnly": true,
                "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
              }
            ],
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          }
        ],
        "restartPolicy": "Always",
        "terminationGracePeriodSeconds": 30,
        "dnsPolicy": "ClusterFirst",
        "nodeSelector": {
          "node-role.kubernetes.io/master": ""
        },
        "serviceAccountName": "ekco",
        "serviceAccount": "ekco",
        "nodeName": "troubleshoot-demo-001",
        "securityContext": {},
        "schedulerName": "default-scheduler",
        "tolerations": [
          {
            "key": "node-role.kubernetes.io/master",
            "operator": "Exists"
          },
          {
            "key": "node.kubernetes.io/not-ready",
            "operator": "Exists",
            "effect": "NoExecute",
            "tolerationSeconds": 300
          },
          {
            "key": "node.kubernetes.io/unreachable",
            "operator": "Exists",
            "effect": "NoExecute",
            "tolerationSeconds": 300
          }
        ],
        "priority": 0,
        "enableServiceLinks": true,
        "preemptionPolicy": "PreemptLowerPriority"
      },
      "status": {
        "phase": "Running",
        "conditions": [
          {
            "type": "Initialized",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:50:59Z"
          },
          {
            "type": "Ready",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:51:01Z"
          },
          {
            "type": "ContainersReady",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:51:01Z"
          },
          {
            "type": "PodScheduled",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:50:59Z"
          }
        ],
        "hostIP": "***HIDDEN***",
        "podIP": "***HIDDEN***",
        "podIPs": [
          {
            "ip": "***HIDDEN***"
          }
        ],
        "startTime": "2022-04-11T22:50:59Z",
        "containerStatuses": [
          {
            "name": "ekc-operator",
            "state": {
              "running": {
                "startedAt": "2022-04-11T22:51:00Z"
              }
            },
            "lastState": {},
            "ready": true,
            "restartCount": 0,
            "image": "replicated/ekco:v0.19.0",
            "imageID": "docker://sha256:aeb480398692157a9918772b63bbfdee24be1ee1fe4c39e716cfc3399955dcb2",
            "containerID": "docker://67af0ad04860f60f305037b9ea65c48933e58c256e4fa7c189a866b0dd9f5174",
            "started": true
          }
        ],
        "qosClass": "Burstable"
      }
    },
    {
      "kind": "Pod",
      "apiVersion": "v1",
      "metadata": {
        "name": "registry-64bbd7b8b9-nwjps",
        "generateName": "registry-64bbd7b8b9-",
        "namespace": "kurl",
        "uid": "2d05903e-bdd3-4662-944b-2022106fa00b",
        "resourceVersion": "1923",
        "creationTimestamp": "2022-04-11T22:52:48Z",
        "labels": {
          "app": "registry",
          "kots.io/backup": "velero",
          "kots.io/kotsadm": "true",
          "pod-template-hash": "64bbd7b8b9"
        },
        "annotations": {
          "backup.velero.io/backup-volumes": "backup",
          "pre.hook.backup.velero.io/command": "[\"/backup.sh\"]",
          "pre.hook.backup.velero.io/container": "registry-backup",
          "pre.hook.backup.velero.io/timeout": "30m"
        },
        "ownerReferences": [
          {
            "apiVersion": "apps/v1",
            "kind": "ReplicaSet",
            "name": "registry-64bbd7b8b9",
            "uid": "7bb2bb22-f49d-4663-9e7c-43eba270acfa",
            "controller": true,
            "blockOwnerDeletion": true
          }
        ],
        "managedFields": [
          {
            "manager": "kube-controller-manager",
            "operation": "Update",
            "apiVersion": "v1",
            "time": "2022-04-11T22:52:48Z",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:annotations": {
                  ".": {},
                  "f:backup.velero.io/backup-volumes": {},
                  "f:pre.hook.backup.velero.io/command": {},
                  "f:pre.hook.backup.velero.io/container": {},
                  "f:pre.hook.backup.velero.io/timeout": {}
                },
                "f:generateName": {},
                "f:labels": {
                  ".": {},
                  "f:app": {},
                  "f:kots.io/backup": {},
                  "f:kots.io/kotsadm": {},
                  "f:pod-template-hash": {}
                },
                "f:ownerReferences": {
                  ".": {},
                  "k:{\"uid\":\"7bb2bb22-f49d-4663-9e7c-43eba270acfa\"}": {}
                }
              },
              "f:spec": {
                "f:containers": {
                  "k:{\"name\":\"registry\"}": {
                    ".": {},
                    "f:command": {},
                    "f:env": {
                      ".": {},
                      "k:{\"name\":\"AWS_ACCESS_KEY_ID\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"REGISTRY_HTTP_SECRET\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      }
                    },
                    "f:image": {},
                    "f:imagePullPolicy": {},
                    "f:name": {},
                    "f:ports": {
                      ".": {},
                      "k:{\"containerPort\":443,\"protocol\":\"TCP\"}": {
                        ".": {},
                        "f:containerPort": {},
                        "f:protocol": {}
                      }
                    },
                    "f:readinessProbe": {
                      ".": {},
                      "f:failureThreshold": {},
                      "f:httpGet": {
                        ".": {},
                        "f:path": {},
                        "f:port": {},
                        "f:scheme": {}
                      },
                      "f:initialDelaySeconds": {},
                      "f:periodSeconds": {},
                      "f:successThreshold": {},
                      "f:timeoutSeconds": {}
                    },
                    "f:resources": {},
                    "f:terminationMessagePath": {},
                    "f:terminationMessagePolicy": {},
                    "f:volumeMounts": {
                      ".": {},
                      "k:{\"mountPath\":\"/auth\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/etc/docker/registry\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/etc/pki\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      }
                    }
                  },
                  "k:{\"name\":\"registry-backup\"}": {
                    ".": {},
                    "f:command": {},
                    "f:env": {
                      ".": {},
                      "k:{\"name\":\"AWS_ACCESS_KEY_ID\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"OBJECT_STORE_HOSTNAME\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      }
                    },
                    "f:image": {},
                    "f:imagePullPolicy": {},
                    "f:name": {},
                    "f:resources": {},
                    "f:terminationMessagePath": {},
                    "f:terminationMessagePolicy": {},
                    "f:volumeMounts": {
                      ".": {},
                      "k:{\"mountPath\":\"/backup\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/backup.sh\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {},
                        "f:subPath": {}
                      }
                    }
                  }
                },
                "f:dnsPolicy": {},
                "f:enableServiceLinks": {},
                "f:initContainers": {
                  ".": {},
                  "k:{\"name\":\"restore\"}": {
                    ".": {},
                    "f:command": {},
                    "f:env": {
                      ".": {},
                      "k:{\"name\":\"AWS_ACCESS_KEY_ID\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"OBJECT_STORE_HOSTNAME\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      }
                    },
                    "f:image": {},
                    "f:imagePullPolicy": {},
                    "f:name": {},
                    "f:resources": {},
                    "f:terminationMessagePath": {},
                    "f:terminationMessagePolicy": {},
                    "f:volumeMounts": {
                      ".": {},
                      "k:{\"mountPath\":\"/backup\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/restore.sh\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {},
                        "f:subPath": {}
                      }
                    }
                  }
                },
                "f:restartPolicy": {},
                "f:schedulerName": {},
                "f:securityContext": {},
                "f:terminationGracePeriodSeconds": {},
                "f:volumes": {
                  ".": {},
                  "k:{\"name\":\"backup\"}": {
                    ".": {},
                    "f:emptyDir": {},
                    "f:name": {}
                  },
                  "k:{\"name\":\"registry-config\"}": {
                    ".": {},
                    "f:configMap": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:name": {}
                    },
                    "f:name": {}
                  },
                  "k:{\"name\":\"registry-htpasswd\"}": {
                    ".": {},
                    "f:name": {},
                    "f:secret": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:secretName": {}
                    }
                  },
                  "k:{\"name\":\"registry-pki\"}": {
                    ".": {},
                    "f:name": {},
                    "f:secret": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:secretName": {}
                    }
                  },
                  "k:{\"name\":\"registry-velero-config\"}": {
                    ".": {},
                    "f:configMap": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:name": {}
                    },
                    "f:name": {}
                  }
                }
              }
            }
          },
          {
            "manager": "Go-http-client",
            "operation": "Update",
            "apiVersion": "v1",
            "time": "2022-04-11T22:53:03Z",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                "f:conditions": {
                  "k:{\"type\":\"ContainersReady\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  },
                  "k:{\"type\":\"Initialized\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  },
                  "k:{\"type\":\"Ready\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  }
                },
                "f:containerStatuses": {},
                "f:hostIP": {},
                "f:initContainerStatuses": {},
                "f:phase": {},
                "f:podIP": {},
                "f:podIPs": {
                  ".": {},
                  "k:{\"ip\":\"***HIDDEN***\"}": {
                    ".": {},
                    "f:ip": {}
                  }
                },
                "f:startTime": {}
              }
            },
            "subresource": "status"
          }
        ]
      },
      "spec": {
        "volumes": [
          {
            "name": "registry-velero-config",
            "configMap": {
              "name": "registry-velero-config",
              "defaultMode": 511
            }
          },
          {
            "name": "backup",
            "emptyDir": {}
          },
          {
            "name": "registry-config",
            "configMap": {
              "name": "registry-config",
              "defaultMode": 420
            }
          },
          {
            "name": "registry-pki",
            "secret": {
              "secretName": "registry-pki",
              "defaultMode": 420
            }
          },
          {
            "name": "registry-htpasswd",
            "secret": {
              "secretName": "registry-htpasswd",
              "defaultMode": 420
            }
          },
          {
            "name": "kube-api-access-k8pwx",
            "projected": {
              "sources": [
                {
                  "serviceAccountToken": {
                    "expirationSeconds": 3607,
                    "path": "token"
                  }
                },
                {
                  "configMap": {
                    "name": "kube-root-ca.crt",
                    "items": [
                      {
                        "key": "ca.crt",
                        "path": "ca.crt"
                      }
                    ]
                  }
                },
                {
                  "downwardAPI": {
                    "items": [
                      {
                        "path": "namespace",
                        "fieldRef": {
                          "apiVersion": "v1",
                          "fieldPath": "metadata.namespace"
                        }
                      }
                    ]
                  }
                }
              ],
              "defaultMode": 420
            }
          }
        ],
        "initContainers": [
          {
            "name": "restore",
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "command": [
              "/restore.sh"
            ],
            "env": [
              {
                "name": "AWS_ACCESS_KEY_ID",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "access-key-id"
                  }
                }
              },
              {
                "name": "AWS_SECRET_ACCESS_KEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "secret-access-key"
                  }
                }
              },
              {
                "name": "OBJECT_STORE_HOSTNAME",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "object-store-hostname"
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "backup",
                "mountPath": "/backup"
              },
              {
                "name": "registry-velero-config",
                "mountPath": "/restore.sh",
                "subPath": "restore.sh"
              },
              {
                "name": "kube-api-access-k8pwx",
                "readOnly": true,
                "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
              }
            ],
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          }
        ],
        "containers": [
          {
            "name": "registry-backup",
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "command": [
              "/bin/sh",
              "-c",
              "trap : TERM INT; tail -f /dev/null \u0026 wait"
            ],
            "env": [
              {
                "name": "AWS_ACCESS_KEY_ID",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "access-key-id"
                  }
                }
              },
              {
                "name": "AWS_SECRET_ACCESS_KEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "secret-access-key"
                  }
                }
              },
              {
                "name": "OBJECT_STORE_HOSTNAME",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "object-store-hostname"
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "registry-velero-config",
                "mountPath": "/backup.sh",
                "subPath": "backup.sh"
              },
              {
                "name": "backup",
                "mountPath": "/backup"
              },
              {
                "name": "kube-api-access-k8pwx",
                "readOnly": true,
                "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
              }
            ],
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          },
          {
            "name": "registry",
            "image": "registry:2.7.1",
            "command": [
              "/bin/registry",
              "serve",
              "/etc/docker/registry/config.yml"
            ],
            "ports": [
              {
                "containerPort": 443,
                "protocol": "TCP"
              }
            ],
            "env": [
              {
                "name": "REGISTRY_HTTP_SECRET",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-session-secret",
                    "key": "haSharedSecret"
                  }
                }
              },
              {
                "name": "AWS_ACCESS_KEY_ID",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "access-key-id"
                  }
                }
              },
              {
                "name": "AWS_SECRET_ACCESS_KEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "secret-access-key"
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "registry-config",
                "mountPath": "/etc/docker/registry"
              },
              {
                "name": "registry-pki",
                "mountPath": "/etc/pki"
              },
              {
                "name": "registry-htpasswd",
                "mountPath": "/auth"
              },
              {
                "name": "kube-api-access-k8pwx",
                "readOnly": true,
                "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
              }
            ],
            "readinessProbe": {
              "httpGet": {
                "path": "/",
                "port": 443,
                "scheme": "HTTPS"
              },
              "initialDelaySeconds": 10,
              "timeoutSeconds": 1,
              "periodSeconds": 1,
              "successThreshold": 2,
              "failureThreshold": 3
            },
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          }
        ],
        "restartPolicy": "Always",
        "terminationGracePeriodSeconds": 30,
        "dnsPolicy": "ClusterFirst",
        "serviceAccountName": "default",
        "serviceAccount": "default",
        "nodeName": "troubleshoot-demo-001",
        "securityContext": {},
        "schedulerName": "default-scheduler",
        "tolerations": [
          {
            "key": "node.kubernetes.io/not-ready",
            "operator": "Exists",
            "effect": "NoExecute",
            "tolerationSeconds": 300
          },
          {
            "key": "node.kubernetes.io/unreachable",
            "operator": "Exists",
            "effect": "NoExecute",
            "tolerationSeconds": 300
          }
        ],
        "priority": 0,
        "enableServiceLinks": true,
        "preemptionPolicy": "PreemptLowerPriority"
      },
      "status": {
        "phase": "Running",
        "conditions": [
          {
            "type": "Initialized",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:52:51Z"
          },
          {
            "type": "Ready",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:53:03Z"
          },
          {
            "type": "ContainersReady",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:53:03Z"
          },
          {
            "type": "PodScheduled",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:52:48Z"
          }
        ],
        "hostIP": "***HIDDEN***",
        "podIP": "***HIDDEN***",
        "podIPs": [
          {
            "ip": "***HIDDEN***"
          }
        ],
        "startTime": "2022-04-11T22:52:48Z",
        "initContainerStatuses": [
          {
            "name": "restore",
            "state": {
              "terminated": {
                "exitCode": 0,
                "reason": "Completed",
                "startedAt": "2022-04-11T22:52:50Z",
                "finishedAt": "2022-04-11T22:52:50Z",
                "containerID": "docker://6c32400c0fa9d49ad65c4f7614eb9fbbd965878ec2d0d5800c935164aaaae2cf"
              }
            },
            "lastState": {},
            "ready": true,
            "restartCount": 0,
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "imageID": "docker://sha256:07b34371d6fe9d1cc473f41e38889ef1461d492a49e0f36e16f8ee38e054fc1b",
            "containerID": "docker://6c32400c0fa9d49ad65c4f7614eb9fbbd965878ec2d0d5800c935164aaaae2cf"
          }
        ],
        "containerStatuses": [
          {
            "name": "registry",
            "state": {
              "running": {
                "startedAt": "2022-04-11T22:52:52Z"
              }
            },
            "lastState": {},
            "ready": true,
            "restartCount": 0,
            "image": "registry:2.7.1",
            "imageID": "docker://sha256:b8604a3fe8543c9e6afc29550de05b36cd162a97aa9b2833864ea8a5be11f3e2",
            "containerID": "docker://be894ceb11645a03fc949de5d473ac5a9806100dae9638ae2fcd8194221e1e63",
            "started": true
          },
          {
            "name": "registry-backup",
            "state": {
              "running": {
                "startedAt": "2022-04-11T22:52:52Z"
              }
            },
            "lastState": {},
            "ready": true,
            "restartCount": 0,
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "imageID": "docker://sha256:07b34371d6fe9d1cc473f41e38889ef1461d492a49e0f36e16f8ee38e054fc1b",
            "containerID": "docker://6072f0c2cec202903961b5417cfdca0a6e2c451e4f5ca3feca18052956a01f84",
            "started": true
          }
        ],
        "qosClass": "BestEffort"
      }
    },
    {
      "kind": "Pod",
      "apiVersion": "v1",
      "metadata": {
        "name": "registry-64bbd7b8b9-ph6md",
        "generateName": "registry-64bbd7b8b9-",
        "namespace": "kurl",
        "uid": "38a6a1cf-acdd-4c05-bab2-17efe6a2fe95",
        "resourceVersion": "1905",
        "creationTimestamp": "2022-04-11T22:52:48Z",
        "labels": {
          "app": "registry",
          "kots.io/backup": "velero",
          "kots.io/kotsadm": "true",
          "pod-template-hash": "64bbd7b8b9"
        },
        "annotations": {
          "backup.velero.io/backup-volumes": "backup",
          "pre.hook.backup.velero.io/command": "[\"/backup.sh\"]",
          "pre.hook.backup.velero.io/container": "registry-backup",
          "pre.hook.backup.velero.io/timeout": "30m"
        },
        "ownerReferences": [
          {
            "apiVersion": "apps/v1",
            "kind": "ReplicaSet",
            "name": "registry-64bbd7b8b9",
            "uid": "7bb2bb22-f49d-4663-9e7c-43eba270acfa",
            "controller": true,
            "blockOwnerDeletion": true
          }
        ],
        "managedFields": [
          {
            "manager": "kube-controller-manager",
            "operation": "Update",
            "apiVersion": "v1",
            "time": "2022-04-11T22:52:48Z",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:annotations": {
                  ".": {},
                  "f:backup.velero.io/backup-volumes": {},
                  "f:pre.hook.backup.velero.io/command": {},
                  "f:pre.hook.backup.velero.io/container": {},
                  "f:pre.hook.backup.velero.io/timeout": {}
                },
                "f:generateName": {},
                "f:labels": {
                  ".": {},
                  "f:app": {},
                  "f:kots.io/backup": {},
                  "f:kots.io/kotsadm": {},
                  "f:pod-template-hash": {}
                },
                "f:ownerReferences": {
                  ".": {},
                  "k:{\"uid\":\"7bb2bb22-f49d-4663-9e7c-43eba270acfa\"}": {}
                }
              },
              "f:spec": {
                "f:containers": {
                  "k:{\"name\":\"registry\"}": {
                    ".": {},
                    "f:command": {},
                    "f:env": {
                      ".": {},
                      "k:{\"name\":\"AWS_ACCESS_KEY_ID\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"REGISTRY_HTTP_SECRET\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      }
                    },
                    "f:image": {},
                    "f:imagePullPolicy": {},
                    "f:name": {},
                    "f:ports": {
                      ".": {},
                      "k:{\"containerPort\":443,\"protocol\":\"TCP\"}": {
                        ".": {},
                        "f:containerPort": {},
                        "f:protocol": {}
                      }
                    },
                    "f:readinessProbe": {
                      ".": {},
                      "f:failureThreshold": {},
                      "f:httpGet": {
                        ".": {},
                        "f:path": {},
                        "f:port": {},
                        "f:scheme": {}
                      },
                      "f:initialDelaySeconds": {},
                      "f:periodSeconds": {},
                      "f:successThreshold": {},
                      "f:timeoutSeconds": {}
                    },
                    "f:resources": {},
                    "f:terminationMessagePath": {},
                    "f:terminationMessagePolicy": {},
                    "f:volumeMounts": {
                      ".": {},
                      "k:{\"mountPath\":\"/auth\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/etc/docker/registry\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/etc/pki\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      }
                    }
                  },
                  "k:{\"name\":\"registry-backup\"}": {
                    ".": {},
                    "f:command": {},
                    "f:env": {
                      ".": {},
                      "k:{\"name\":\"AWS_ACCESS_KEY_ID\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"OBJECT_STORE_HOSTNAME\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      }
                    },
                    "f:image": {},
                    "f:imagePullPolicy": {},
                    "f:name": {},
                    "f:resources": {},
                    "f:terminationMessagePath": {},
                    "f:terminationMessagePolicy": {},
                    "f:volumeMounts": {
                      ".": {},
                      "k:{\"mountPath\":\"/backup\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/backup.sh\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {},
                        "f:subPath": {}
                      }
                    }
                  }
                },
                "f:dnsPolicy": {},
                "f:enableServiceLinks": {},
                "f:initContainers": {
                  ".": {},
                  "k:{\"name\":\"restore\"}": {
                    ".": {},
                    "f:command": {},
                    "f:env": {
                      ".": {},
                      "k:{\"name\":\"AWS_ACCESS_KEY_ID\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      },
                      "k:{\"name\":\"OBJECT_STORE_HOSTNAME\"}": {
                        ".": {},
                        "f:name": {},
                        "f:valueFrom": {
                          ".": {},
                          "f:secretKeyRef": {}
                        }
                      }
                    },
                    "f:image": {},
                    "f:imagePullPolicy": {},
                    "f:name": {},
                    "f:resources": {},
                    "f:terminationMessagePath": {},
                    "f:terminationMessagePolicy": {},
                    "f:volumeMounts": {
                      ".": {},
                      "k:{\"mountPath\":\"/backup\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {}
                      },
                      "k:{\"mountPath\":\"/restore.sh\"}": {
                        ".": {},
                        "f:mountPath": {},
                        "f:name": {},
                        "f:subPath": {}
                      }
                    }
                  }
                },
                "f:restartPolicy": {},
                "f:schedulerName": {},
                "f:securityContext": {},
                "f:terminationGracePeriodSeconds": {},
                "f:volumes": {
                  ".": {},
                  "k:{\"name\":\"backup\"}": {
                    ".": {},
                    "f:emptyDir": {},
                    "f:name": {}
                  },
                  "k:{\"name\":\"registry-config\"}": {
                    ".": {},
                    "f:configMap": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:name": {}
                    },
                    "f:name": {}
                  },
                  "k:{\"name\":\"registry-htpasswd\"}": {
                    ".": {},
                    "f:name": {},
                    "f:secret": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:secretName": {}
                    }
                  },
                  "k:{\"name\":\"registry-pki\"}": {
                    ".": {},
                    "f:name": {},
                    "f:secret": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:secretName": {}
                    }
                  },
                  "k:{\"name\":\"registry-velero-config\"}": {
                    ".": {},
                    "f:configMap": {
                      ".": {},
                      "f:defaultMode": {},
                      "f:name": {}
                    },
                    "f:name": {}
                  }
                }
              }
            }
          },
          {
            "manager": "Go-http-client",
            "operation": "Update",
            "apiVersion": "v1",
            "time": "2022-04-11T22:53:02Z",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                "f:conditions": {
                  "k:{\"type\":\"ContainersReady\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  },
                  "k:{\"type\":\"Initialized\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  },
                  "k:{\"type\":\"Ready\"}": {
                    ".": {},
                    "f:lastProbeTime": {},
                    "f:lastTransitionTime": {},
                    "f:status": {},
                    "f:type": {}
                  }
                },
                "f:containerStatuses": {},
                "f:hostIP": {},
                "f:initContainerStatuses": {},
                "f:phase": {},
                "f:podIP": {},
                "f:podIPs": {
                  ".": {},
                  "k:{\"ip\":\"***HIDDEN***\"}": {
                    ".": {},
                    "f:ip": {}
                  }
                },
                "f:startTime": {}
              }
            },
            "subresource": "status"
          }
        ]
      },
      "spec": {
        "volumes": [
          {
            "name": "registry-velero-config",
            "configMap": {
              "name": "registry-velero-config",
              "defaultMode": 511
            }
          },
          {
            "name": "backup",
            "emptyDir": {}
          },
          {
            "name": "registry-config",
            "configMap": {
              "name": "registry-config",
              "defaultMode": 420
            }
          },
          {
            "name": "registry-pki",
            "secret": {
              "secretName": "registry-pki",
              "defaultMode": 420
            }
          },
          {
            "name": "registry-htpasswd",
            "secret": {
              "secretName": "registry-htpasswd",
              "defaultMode": 420
            }
          },
          {
            "name": "kube-api-access-t6g9q",
            "projected": {
              "sources": [
                {
                  "serviceAccountToken": {
                    "expirationSeconds": 3607,
                    "path": "token"
                  }
                },
                {
                  "configMap": {
                    "name": "kube-root-ca.crt",
                    "items": [
                      {
                        "key": "ca.crt",
                        "path": "ca.crt"
                      }
                    ]
                  }
                },
                {
                  "downwardAPI": {
                    "items": [
                      {
                        "path": "namespace",
                        "fieldRef": {
                          "apiVersion": "v1",
                          "fieldPath": "metadata.namespace"
                        }
                      }
                    ]
                  }
                }
              ],
              "defaultMode": 420
            }
          }
        ],
        "initContainers": [
          {
            "name": "restore",
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "command": [
              "/restore.sh"
            ],
            "env": [
              {
                "name": "AWS_ACCESS_KEY_ID",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "access-key-id"
                  }
                }
              },
              {
                "name": "AWS_SECRET_ACCESS_KEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "secret-access-key"
                  }
                }
              },
              {
                "name": "OBJECT_STORE_HOSTNAME",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "object-store-hostname"
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "backup",
                "mountPath": "/backup"
              },
              {
                "name": "registry-velero-config",
                "mountPath": "/restore.sh",
                "subPath": "restore.sh"
              },
              {
                "name": "kube-api-access-t6g9q",
                "readOnly": true,
                "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
              }
            ],
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          }
        ],
        "containers": [
          {
            "name": "registry-backup",
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "command": [
              "/bin/sh",
              "-c",
              "trap : TERM INT; tail -f /dev/null \u0026 wait"
            ],
            "env": [
              {
                "name": "AWS_ACCESS_KEY_ID",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "access-key-id"
                  }
                }
              },
              {
                "name": "AWS_SECRET_ACCESS_KEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "secret-access-key"
                  }
                }
              },
              {
                "name": "OBJECT_STORE_HOSTNAME",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "object-store-hostname"
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "registry-velero-config",
                "mountPath": "/backup.sh",
                "subPath": "backup.sh"
              },
              {
                "name": "backup",
                "mountPath": "/backup"
              },
              {
                "name": "kube-api-access-t6g9q",
                "readOnly": true,
                "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
              }
            ],
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          },
          {
            "name": "registry",
            "image": "registry:2.7.1",
            "command": [
              "/bin/registry",
              "serve",
              "/etc/docker/registry/config.yml"
            ],
            "ports": [
              {
                "containerPort": 443,
                "protocol": "TCP"
              }
            ],
            "env": [
              {
                "name": "REGISTRY_HTTP_SECRET",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-session-secret",
                    "key": "haSharedSecret"
                  }
                }
              },
              {
                "name": "AWS_ACCESS_KEY_ID",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "access-key-id"
                  }
                }
              },
              {
                "name": "AWS_SECRET_ACCESS_KEY",
                "valueFrom": {
                  "secretKeyRef": {
                    "name": "registry-s3-secret",
                    "key": "secret-access-key"
                  }
                }
              }
            ],
            "resources": {},
            "volumeMounts": [
              {
                "name": "registry-config",
                "mountPath": "/etc/docker/registry"
              },
              {
                "name": "registry-pki",
                "mountPath": "/etc/pki"
              },
              {
                "name": "registry-htpasswd",
                "mountPath": "/auth"
              },
              {
                "name": "kube-api-access-t6g9q",
                "readOnly": true,
                "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
              }
            ],
            "readinessProbe": {
              "httpGet": {
                "path": "/",
                "port": 443,
                "scheme": "HTTPS"
              },
              "initialDelaySeconds": 10,
              "timeoutSeconds": 1,
              "periodSeconds": 1,
              "successThreshold": 2,
              "failureThreshold": 3
            },
            "terminationMessagePath": "/dev/termination-log",
            "terminationMessagePolicy": "File",
            "imagePullPolicy": "IfNotPresent"
          }
        ],
        "restartPolicy": "Always",
        "terminationGracePeriodSeconds": 30,
        "dnsPolicy": "ClusterFirst",
        "serviceAccountName": "default",
        "serviceAccount": "default",
        "nodeName": "troubleshoot-demo-001",
        "securityContext": {},
        "schedulerName": "default-scheduler",
        "tolerations": [
          {
            "key": "node.kubernetes.io/not-ready",
            "operator": "Exists",
            "effect": "NoExecute",
            "tolerationSeconds": 300
          },
          {
            "key": "node.kubernetes.io/unreachable",
            "operator": "Exists",
            "effect": "NoExecute",
            "tolerationSeconds": 300
          }
        ],
        "priority": 0,
        "enableServiceLinks": true,
        "preemptionPolicy": "PreemptLowerPriority"
      },
      "status": {
        "phase": "Running",
        "conditions": [
          {
            "type": "Initialized",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:52:50Z"
          },
          {
            "type": "Ready",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:53:02Z"
          },
          {
            "type": "ContainersReady",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:53:02Z"
          },
          {
            "type": "PodScheduled",
            "status": "True",
            "lastProbeTime": null,
            "lastTransitionTime": "2022-04-11T22:52:48Z"
          }
        ],
        "hostIP": "***HIDDEN***",
        "podIP": "***HIDDEN***",
        "podIPs": [
          {
            "ip": "***HIDDEN***"
          }
        ],
        "startTime": "2022-04-11T22:52:48Z",
        "initContainerStatuses": [
          {
            "name": "restore",
            "state": {
              "terminated": {
                "exitCode": 0,
                "reason": "Completed",
                "startedAt": "2022-04-11T22:52:50Z",
                "finishedAt": "2022-04-11T22:52:50Z",
                "containerID": "docker://fcc905432b4278cdbc43aa93d8b344935a4f38eb39de3f71fc1e238587414100"
              }
            },
            "lastState": {},
            "ready": true,
            "restartCount": 0,
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "imageID": "docker://sha256:07b34371d6fe9d1cc473f41e38889ef1461d492a49e0f36e16f8ee38e054fc1b",
            "containerID": "docker://fcc905432b4278cdbc43aa93d8b344935a4f38eb39de3f71fc1e238587414100"
          }
        ],
        "containerStatuses": [
          {
            "name": "registry",
            "state": {
              "running": {
                "startedAt": "2022-04-11T22:52:51Z"
              }
            },
            "lastState": {},
            "ready": true,
            "restartCount": 0,
            "image": "registry:2.7.1",
            "imageID": "docker://sha256:b8604a3fe8543c9e6afc29550de05b36cd162a97aa9b2833864ea8a5be11f3e2",
            "containerID": "docker://0c5628de9bdaa79378938d25a781221931aed35e73e445d0f794af74a00f4c0b",
            "started": true
          },
          {
            "name": "registry-backup",
            "state": {
              "running": {
                "startedAt": "2022-04-11T22:52:51Z"
              }
            },
            "lastState": {},
            "ready": true,
            "restartCount": 0,
            "image": "kurlsh/s3cmd:7f7dc75-20210331",
            "imageID": "docker://sha256:07b34371d6fe9d1cc473f41e38889ef1461d492a49e0f36e16f8ee38e054fc1b",
            "containerID": "docker://56ee824297abb767f821cbf5bec8d16302954930979d68e2fcb063db2eaf8b7a",
            "started": true
          }
        ],
        "qosClass": "BestEffort"
      }
    }
  ]
}
